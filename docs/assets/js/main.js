"use strict";const searchInput=document.querySelector(".js_search_input"),searchBtn=document.querySelector(".js_search_button"),resetBtn=document.querySelector(".js_reset_button"),favSection=document.querySelector(".js_favorites_section"),favList=document.querySelector(".js_favorites_list"),searchSection=document.querySelector(".js_search_section");let searchList=document.querySelector(".js_search_list"),searchArray=[],favArray=[],favoriteDrink="js_favoriteDrink";function removeFavClass(){const e=document.querySelectorAll(".js_favoriteDrink");for(const r of e)r.classList.remove("fav_drink"),r.classList.add("not_fav")}function listenerDrinkItem(){const e=document.querySelectorAll(".js_drinkItem");for(const r of e){r.addEventListener("click",handleClickDrinks);-1!==favArray.findIndex(e=>e.drinkId===r.id)&&r.classList.add("fav_drink")}}function paintDrinks(e,r,t){let a="";for(const r of e){const e="https://via.placeholder.com/210x295/ffffff/666666/?text="+r.drinkName;a+=`<li class ="drink_li js_drinkItem ${t} " id=${r.drinkId}>`,a+='<article class="drink_article">',""!==r.thumbnail?a+=`<img class ="drink_image" src="${r.thumbnail}">`:a+=`<img class ="drink_image" src="${e}">`,a+=`<h3 class="drink_title">${r.drinkName}</h3>`,a+="</article>",a+="</li>"}r.innerHTML=a,listenerDrinkItem(),removeFavClass()}function handleClickDrinks(e){e.currentTarget.classList.toggle("fav_drink");const r=e.currentTarget.id,t=searchArray.find(e=>e.drinkId===r),a=favArray.findIndex(e=>e.drinkId===r);-1===a?favArray.push(t):favArray.splice(a,1),paintDrinks(favArray,favList,favoriteDrink),removeFavClass(),setFavLocalStorage()}function fetchFunction(){removeFavClass();const e=searchInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{searchArray=e.drinks.map(e=>({thumbnail:e.strDrinkThumb,drinkName:e.strDrink,drinkId:e.idDrink})),paintDrinks(searchArray,searchList,"")})}function handleSearchClick(e){e.preventDefault(),fetchFunction(),searchSection.classList.remove("hidden"),favSection.classList.remove("hidden"),removeFavClass()}function setFavLocalStorage(){const e=JSON.stringify(favArray);localStorage.setItem("usersFavDrinks",e)}function getFavLocalStorage(){const e=localStorage.getItem("usersFavDrinks");if(null===e)setFavLocalStorage();else{const r=JSON.parse(e);favArray=r,paintDrinks(favArray,favList,favoriteDrink),favArray.length>0&&favSection.classList.remove("hidden")}}getFavLocalStorage(),removeFavClass(),searchBtn.addEventListener("click",handleSearchClick);