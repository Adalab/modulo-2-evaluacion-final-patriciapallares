"use strict";const searchInput=document.querySelector(".js_search_input"),searchBtn=document.querySelector(".js_search_button"),resetBtn=document.querySelector(".js_reset_button"),favSection=document.querySelector(".js_favorites_section"),favList=document.querySelector(".js_favorites_list"),searchSection=document.querySelector(".js_search_section");let searchList=document.querySelector(".js_search_list"),searchArray=[],favArray=[],notFavHtml="";function handleClickDrinks(e){e.currentTarget.classList.add("fav_drink");const t=e.currentTarget.id,n=searchArray.find(e=>e.drinkId===t),a=favArray.findIndex(e=>e.drinkId===t);-1===a?(favArray.push(n),e.currentTarget.classList.add("fav_drink")):(favArray.splice(a,1),e.currentTarget.classList.remove("fav_drink")),paintFavDrinks(),setFavLocalStorage()}function listenerDrinkItem(){const e=document.querySelectorAll(".js_drink_search_item");for(const t of e){t.addEventListener("click",handleClickDrinks);-1!==favArray.findIndex(e=>e.drinkId===t.id)&&t.classList.add("fav_drink")}}function handleSearchClick(e){e.preventDefault(),fetchFunction(),searchSection.classList.remove("hidden"),favSection.classList.remove("hidden")}function handleFavBtnClick(e){e.preventDefault();const t=e.currentTarget.name,n=(favArray.find(e=>e.drinkId===t),favArray.findIndex(e=>e.drinkId===t));favArray.splice(n,1);const a=document.querySelectorAll(".fav_drink");for(const e of a)console.log(e.id),console.log(t),parseInt(t)!==parseInt(e)&&(console.log("NO soy una igualdad pero me cumplo"),e.classList.remove("fav_drink"));paintFavDrinks(),setFavLocalStorage()}function listenerFavItem(){const e=document.querySelectorAll(".js_delete");for(const t of e)t.addEventListener("click",handleFavBtnClick)}function fetchFunction(){const e=searchInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{searchArray=e.drinks.map(e=>({thumbnail:e.strDrinkThumb,drinkName:e.strDrink,drinkId:e.idDrink})),paintSearchDrinks()})}function setFavLocalStorage(){const e=JSON.stringify(favArray);localStorage.setItem("usersFavDrinks",e)}function getFavLocalStorage(){const e=localStorage.getItem("usersFavDrinks");if(null!==e){const t=JSON.parse(e);favArray=t,paintFavDrinks(),favArray.length>0&&favSection.classList.remove("hidden")}}getFavLocalStorage(),searchBtn.addEventListener("click",handleSearchClick);const modal=document.querySelector(".js_modal"),closeBtn=document.querySelector(".js_close_btn"),showModal=()=>{modal.classList.remove("hidden")};setTimeout(showModal,5e3);const closeModal=()=>{modal.classList.add("hidden")};function paintFavDrinks(){let e="";for(const t of favArray){const n="https://via.placeholder.com/210x295/ffffff/666666/?text="+t.drinkName;e+=`<li class ="drink_li js_drink_fav_item" id=${t.drinkId}>`,e+='<article class="drink_article">',e+=`<button name="${t.drinkId}" class="delete__icon js_delete"><p class="theX">×</p></button>`,""!==t.thumbnail?e+=`<img class ="drink_image" src="${t.thumbnail}">`:e+=`<img class ="drink_image" src="${n}">`,e+=`<h3 class="drink_title">${t.drinkName}</h3>`,e+="</article>",e+="</li>"}favList.innerHTML=e,listenerFavItem()}function paintSearchDrinks(){let e="";for(const t of searchArray){const n="https://via.placeholder.com/210x295/ffffff/666666/?text="+t.drinkName;e+=`<li class ="drink_li js_drink_search_item" id=${t.drinkId}>`,e+='<article class="drink_article special">',""!==t.thumbnail?e+=`<img class ="drink_image" src="${t.thumbnail}">`:e+=`<img class ="drink_image" src="${n}">`,e+=`<h3 class="drink_title">${t.drinkName}</h3>`,e+="</article>",e+="</li>"}searchList.innerHTML=e,listenerDrinkItem()}function handleResetClick(e){e.preventDefault(),console.log("soy el botón reset y me has clicado"),favArray=[],paintFavDrinks(),setFavLocalStorage(),favSection.classList.add("hidden"),searchSection.classList.add("hidden"),searchInput.value=""}closeBtn.addEventListener("click",closeModal),resetBtn.addEventListener("click",handleResetClick);